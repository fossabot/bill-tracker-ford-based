### 0.3.4 Overview


Goal: Automatically scan dependencies (licenses + known risks) on every PR / push, and upload results to FOSSA.

* FOSSA CLI v3
* a push-only token
* github actions now, and later we can translate the exact same steps to Tekton


### 0.3.4.1 Create or confirm your fossa account
and organization

You need:

A FOSSA account

An org/workspace where your project will live

Access to generate tokens

Checkpoint test

Log into FOSSA and confirm you can access Settings (or Account Settings).

### 0.3.4.2 Create the correct API Token (Push-only) 

Why Push-Only

Push-Only tokens can upload scan results but cannot read/modify other data, which makes them appropriate for CI.
FOSSA - Guides & Documentation
+2
FOSSA - Guides & Documentation
+2

What to do (UI steps)

In FOSSA:

Go to Account Settings

Find API Tokens (sometimes under Integrations or Security)

Click Create token

Name it something like:

bill-tracker-ford-based-ci

Choose Push-Only (if there is a toggle/radio)

Create and copy the token

Important:

You only see it once. Store it in a password manager.

Checkpoint test

You have a token created and saved.


### 0.3.4.3 Add FOSSA_API_KEY to GitHub Secrets


Why this name

FOSSA CLI reads FOSSA_API_KEY by default.
FOSSA - Guides & Documentation
+1

What to do

GitHub:

Repo -> Settings -> Secrets and variables -> Actions -> New repository secret

Name: FOSSA_API_KEY

Value: your push-only token

Checkpoint test

Secret exists in repo secrets list: FOSSA_API_KEY

### 0.3.4.4 Fix your pipeline install step (v3 + no permission issues)

ou already found the failure:

You were installing v1 (deprecated)

It tried to write to /usr/local/bin and got permission denied

FOSSA itself recommends using install-latest.sh to get the latest CLI (v3).
FOSSA - Guides & Documentation
+2
FOSSA - Guides & Documentation
+2

Update your GitHub Actions workflow

Replace your install step with:

```yaml
- name: Install FOSSA CLI (v3)
  run: |
    mkdir -p "$HOME/.local/bin"
    curl -H 'Cache-Control: no-cache' https://raw.githubusercontent.com/fossas/fossa-cli/master/install-latest.sh | bash -s -- -b "$HOME/.local/bin"
    echo "$HOME/.local/bin" >> $GITHUB_PATH
    fossa --version



```

Why this works:

Installs the current supported CLI (v3)
FOSSA - Guides & Documentation
+1

Installs to a user-writable directory to avoid /usr/local/bin permission issues

Adds it to PATH for later steps in the job

Checkpoint test

Run the workflow and confirm the log prints fossa --version.

### 0.3.4.5 Add the actual scan step (fossa analyze)

Once CLI installs, add this step:

```yaml
- name: FOSSA Analyze
  env:
    FOSSA_API_KEY: ${{ secrets.FOSSA_API_KEY }}
  run: |
    fossa analyze

```

FOSSA documents FOSSA_API_KEY=<token> fossa analyze as the standard CI invocation.
FOSSA - Guides & Documentation
+1

Monorepo note (important)

If your repo has backend/ and frontend/, you need to decide where to run fossa analyze:

If you want full repo scan (backend + frontend deps), run it from repo root

If you only want backend for now, run it from backend/

Strong opinion for your case: run it from repo root so you catch npm/pnpm deps later too.

So in YAML you can do:

```yaml
- name: FOSSA Analyze
  env:
    FOSSA_API_KEY: ${{ secrets.FOSSA_API_KEY }}
  run: |
    fossa analyze

```


(And do not set working-directory for that step, or set it explicitly to root.)

Checkpoint test

Actions should show:

Analyze completes

Results upload succeeds

### 0.3.4.6 Confirm results in FOSSA UI

Once upload succeeds:

Open FOSSA UI

Find your project

Confirm a scan exists for your default branch

Checkpoint test

