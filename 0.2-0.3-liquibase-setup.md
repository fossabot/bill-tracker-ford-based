
application.yml

```yaml
spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/finance_tracker
    username: finance
    password: finance
  jpa:
    hibernate:
      ddl-auto: validate
    properties:
      hibernate:
        format_sql: true
  liquibase:
    change-log: classpath:db/changelog/db.changelog-master.yaml

```

db/changelog/db.changelog-master.yaml

```yaml

databaseChangeLog:
  - include:
      file: db/changelog/changes/001-init.yaml

```

db/changelog/changes/001-init.yaml
This is Slice 0, so we keep it tiny, but real.
```yaml
databaseChangeLog:
  - changeSet:
      id: 001-init-users
      author: you
      changes:
        - createTable:
            tableName: users
            columns:
              - column:
                  name: id
                  type: uuid
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: email
                  type: varchar(255)
                  constraints:
                    nullable: false
                    unique: true
              - column:
                  name: created_at
                  type: timestamptz
                  constraints:
                    nullable: false
```
Note: later in Slice 1 weâ€™ll add password hash, refresh token table, etc.

0.3 Integration test that proves Liquibase ran (TDD foundation)

```java
package com.yourorg;

import org.junit.jupiter.api.Test;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.test.context.DynamicPropertyRegistry;
import org.springframework.test.context.DynamicPropertySource;
import org.testcontainers.containers.PostgreSQLContainer;
import org.testcontainers.junit.jupiter.Container;
import org.testcontainers.junit.jupiter.Testcontainers;

import static org.assertj.core.api.Assertions.assertThat;

@Testcontainers
@SpringBootTest
class LiquibaseSmokeIT {

  @Container
  static final PostgreSQLContainer<?> postgres =
      new PostgreSQLContainer<>("postgres:16-alpine")
          .withDatabaseName("testdb")
          .withUsername("test")
          .withPassword("test");

  @DynamicPropertySource
  static void props(DynamicPropertyRegistry r) {
    r.add("spring.datasource.url", postgres::getJdbcUrl);
    r.add("spring.datasource.username", postgres::getUsername);
    r.add("spring.datasource.password", postgres::getPassword);
    r.add("spring.jpa.hibernate.ddl-auto", () -> "validate");
  }

  @Test
  void liquibaseCreatesUsersTable(JdbcTemplate jdbc) {
    Integer exists = jdbc.queryForObject("""
      select count(*) from information_schema.tables
      where table_schema = 'public' and table_name = 'users'
    """, Integer.class);

    assertThat(exists).isEqualTo(1);
  }
}

```